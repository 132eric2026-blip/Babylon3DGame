# 技能系统

## 概述
技能系统为玩家提供了强大的战斗能力。玩家可以通过按下数字键（1-9, 0）来施放对应槽位的技能。

## 技能管理器 (SkillManager)
- 位置：`src/skills/SkillManager.js`
- 负责管理所有技能的注册、激活和冷却
- 自动集成到玩家系统中

## 已实现技能

### 1. 半月斩 (HalfMoonSlash)
- **按键**：数字键 `1`
- **类型**：范围攻击技能
- **冷却时间**：3秒
- **效果**：
  - 以玩家为中心，在正前方2米处释放一个半月形的气波
  - 气波呈现明亮的青白色光辉
  - 带有大量飞溅的粒子效果和白色火花
  - 气波在原地停留0.8秒后消散，不会飞出去

### 技能特效
- **半月形气波**：使用 Ribbon 网格创建，呈半圆形
- **粒子系统**：
  - 主粒子：青白色光辉（400粒子/秒）
  - 火花粒子：白色火花，带有重力下落效果（250粒子/秒）
- **动画效果**：
  - 快速放大（从0.3倍到1.3倍）
  - 停留片刻后缩小消失
  - 轻微旋转增加动感
  - 最后淡出消失
- **发光效果**：集成 GlowLayer，气波发出明亮光辉

## 如何添加新技能

1. 在 `src/skills/` 目录下创建新技能文件（例如：`MySkill.js`）
2. 继承 `BaseSkill` 类
3. 实现 `execute()` 方法
4. 在 `SkillManager.js` 的 `initSkills()` 方法中注册技能

示例：
```javascript
import { BaseSkill } from "./BaseSkill";

export class MySkill extends BaseSkill {
    constructor(scene, player) {
        super(scene, player, "我的技能", 5.0); // 5秒冷却
    }
    
    execute() {
        // 技能效果实现
        console.log("施放技能！");
    }
}
```

## 技术实现

### 基类 (BaseSkill)
- 提供冷却管理
- 自动处理技能激活逻辑
- 子类只需实现 `execute()` 方法

### 半月斩实现亮点
1. **半月形网格生成**：使用三角函数计算半圆路径，通过 Ribbon 创建平滑的带状网格
2. **双粒子系统**：主光辉粒子 + 火花粒子，营造丰富的视觉效果
3. **动画组合**：位置、缩放、透明度三种动画同时播放
4. **自动清理**：动画结束后自动停止粒子系统并销毁网格，避免内存泄漏
5. **玩家朝向跟随**：气波始终沿着玩家面向的方向释放

## 使用方法
1. 进入游戏
2. 按下数字键 `1` 释放半月斩
3. 观察酷炫的半月形气波效果
4. 等待冷却后可再次施放

## 未来扩展
- 技能UI指示器（显示冷却时间）
- 更多技能（火焰风暴、雷霆打击等）
- 技能组合系统
- 技能伤害判定
- 技能升级系统
